<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="https://static-00.iconduck.com/assets.00/dungeons-and-dragons-icon-512x492-vw90341y.png">
    <title>Stat Block Builder</title>
  
  <style>

    @font-face {
      font-family: "Bookinsanity";
      src: url("https://benlk.github.io/solbera-dnd-fonts/Bookinsanity/Bookinsanity.otf") format("opentype");
      font-weight: normal;
    }
    
    @font-face {
		  font-family: "Mr Eaves Small Caps";
		  src: url("https://benlk.github.io/solbera-dnd-fonts/Mr Eaves/Mr Eaves Small Caps.otf") format("opentype");
		  font-weight: normal;
	  }

    @font-face {
		  font-family: "Scaly Sans";
		  src: url("https://benlk.github.io/solbera-dnd-fonts/Scaly Sans/Scaly Sans.otf") format("opentype");
		  font-weight: normal;
	  }

    @font-face {
      font-family: "Scaly Sans Caps";
      src: url("https://benlk.github.io/solbera-dnd-fonts/Scaly Sans Caps/Scaly Sans Caps.otf") format("opentype");
      font-weight: normal;
    }

    body {
      font-family:'Bookinsanity';
      font-size:15px;
      text-align:left;
      color:#222222;
      background:#954531;
      line-height:150%;
    }

    /*Multi Select Style*/

    .multi-select {
      display: flex;
      box-sizing: border-box;
      flex-direction: column;
      position: relative;
      width: 100%;
      user-select: none;
    }
    .multi-select .multi-select-header {
      border: 1px solid #dee2e6;
      padding: 7px 30px 7px 12px;
      overflow: hidden;
      gap: 7px;
      min-height: 45px;
    }
    .multi-select .multi-select-header::after {
      content: "";
      display: block;
      position: absolute;
      top: 50%;
      right: 15px;
      transform: translateY(-50%);
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23949ba3' viewBox='0 0 16 16'%3E%3Cpath d='M8 13.1l-8-8 2.1-2.2 5.9 5.9 5.9-5.9 2.1 2.2z'/%3E%3C/svg%3E");
      height: 12px;
      width: 12px;
    }
    .multi-select .multi-select-header.multi-select-header-active {
      border-color: #c1c9d0;
    }
    .multi-select .multi-select-header.multi-select-header-active::after {
      transform: translateY(-50%) rotate(180deg);
    }
    .multi-select .multi-select-header.multi-select-header-active + .multi-select-options {
      display: flex;
    }
    .multi-select .multi-select-header .multi-select-header-placeholder {
      color: #65727e;
    }
    .multi-select .multi-select-header .multi-select-header-option {
      display: inline-flex;
      align-items: center;
      background-color: #f3f4f7;
      font-size: 14px;
      padding: 3px 8px;
      border-radius: 5px;
    }
    .multi-select .multi-select-header .multi-select-header-max {
      font-size: 14px;
      color: #65727e;
    }
    .multi-select .multi-select-options {
      display: none;
      box-sizing: border-box;
      flex-flow: wrap;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      z-index: 999;
      margin-top: 5px;
      padding: 5px;
      background-color: #fff;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      max-height: 200px;
      overflow-y: auto;
      overflow-x: hidden;
    }
    .multi-select .multi-select-options::-webkit-scrollbar {
      width: 5px;
    }
    .multi-select .multi-select-options::-webkit-scrollbar-track {
      background: #f0f1f3;
    }
    .multi-select .multi-select-options::-webkit-scrollbar-thumb {
      background: #cdcfd1;
    }
    .multi-select .multi-select-options::-webkit-scrollbar-thumb:hover {
      background: #b2b6b9;
    }
    .multi-select .multi-select-options .multi-select-option, .multi-select .multi-select-options .multi-select-all {
      padding: 4px 12px;
      height: 42px;
    }
    .multi-select .multi-select-options .multi-select-option .multi-select-option-radio, .multi-select .multi-select-options .multi-select-all .multi-select-option-radio {
      margin-right: 14px;
      height: 16px;
      width: 16px;
      border: 1px solid #ced4da;
      border-radius: 4px;
    }
    .multi-select .multi-select-options .multi-select-option .multi-select-option-text, .multi-select .multi-select-options .multi-select-all .multi-select-option-text {
      box-sizing: border-box;
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      color: inherit;
      font-size: 16px;
      line-height: 20px;
    }
    .multi-select .multi-select-options .multi-select-option.multi-select-selected .multi-select-option-radio, .multi-select .multi-select-options .multi-select-all.multi-select-selected .multi-select-option-radio {
      border-color: #40c979;
      background-color: #40c979;
    }
    .multi-select .multi-select-options .multi-select-option.multi-select-selected .multi-select-option-radio::after, .multi-select .multi-select-options .multi-select-all.multi-select-selected .multi-select-option-radio::after {
      content: "";
      display: block;
      width: 3px;
      height: 7px;
      margin: 0.12em 0 0 0.27em;
      border: solid #fff;
      border-width: 0 0.15em 0.15em 0;
      transform: rotate(45deg);
    }
    .multi-select .multi-select-options .multi-select-option.multi-select-selected .multi-select-option-text, .multi-select .multi-select-options .multi-select-all.multi-select-selected .multi-select-option-text {
      color: #40c979;
    }
    .multi-select .multi-select-options .multi-select-option:hover, .multi-select .multi-select-options .multi-select-option:active, .multi-select .multi-select-options .multi-select-all:hover, .multi-select .multi-select-options .multi-select-all:active {
      background-color: #f3f4f7;
    }
    .multi-select .multi-select-options .multi-select-all {
      border-bottom: 1px solid #f1f3f5;
      border-radius: 0;
    }
    .multi-select .multi-select-options .multi-select-search {
      padding: 7px 10px;
      border: 1px solid #dee2e6;
      border-radius: 5px;
      margin: 10px 10px 5px 10px;
      width: 100%;
      outline: none;
      font-size: 16px;
    }
    .multi-select .multi-select-options .multi-select-search::placeholder {
      color: #b2b5b9;
    }
    .multi-select .multi-select-header, .multi-select .multi-select-option, .multi-select .multi-select-all {
      display: flex;
      flex-wrap: wrap;
      box-sizing: border-box;
      align-items: center;
      border-radius: 5px;
      cursor: pointer;
      display: flex;
      align-items: center;
      width: 100%;
      font-size: 16px;
      color: #212529;
    }
    
    h1 {
      font-family:'Mr Eaves Small Caps';
      font-size:30px;
      text-align:center;
      color:darkred;
    }

    #statblock h1 {
      text-align:left;
      font-size:24px;
    }

    h2 {
      font-family:'Scaly Sans Caps';
      font-size:24px;
      text-align:center;
      color:darkred;
    }

    #statblock h2 {
      text-align:left;
      font-size:18px;
    }

    label {
      font-family:'Bookinsanity';
    }

    table {
      width:90%;
      margin:auto;
      text-align:left;
      vertical-align:top;
      padding:3px;
    }

    td {
      font-family:'Bookinsanity';
      font-size:16px;
      padding-left:20px;
      vertical-align:top;
    }

    select {
      font-family:'Scaly Sans';
      font-size:16px;
      padding:3px;
      margin-bottom:3px;
    }

    option {
      font-family:'Scaly Sans';
      font-size:16px;
    }

    input {
      font-family:'Scaly Sans';
      font-size:16px;
    }

    textarea {
      width:75%;
      max-width:800px;
      min-height:100px;
      margin:auto;
      resize:vertical;
      font-size:16px;
      text-align:left;
      vertical-align:top;
      display:inline;
      border:1px solid darkred;
    }

    /* Chrome, Safari, Edge, Opera */
    input::-webkit-outer-spin-button, input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* Firefox */
    input[type=number] {
      -moz-appearance: textfield;
      appearance: textfield;
    }

    .num-box {
      width:30px;
      height:auto;
      font-size:14px;
      text-align:center;
      display:inline;
      font-family:'Consolas';
    }

    .text-box-long {
      width:175px;
      height:auto;
      font-size:16px;
      text-align:left;
      display:inline;
      font-family:'Consolas';
    }

    .text-box-short {
      width:100px;
      height:auto;
      font-size:16px;
      text-align:left;
      display:inline;
      font-family:'Consolas';
    }

    .button {
      cursor: pointer;
      padding:4px;
      margin-right:5px;
      margin-top:3px;
      margin-bottom:3px;
      font-family:'Scaly Sans';
      font-size:16px;
      background:#954531;
      color:#ffffff;
      border-radius:6px;
    }

    .end-spacer {
      width:100%;
      height:100px;
    }

    .switch-button {
      background: #ffffff8f;
      box-sizing: border-box;
      padding: 0;
      margin: 0;
      border-radius: 20px;
      overflow: hidden;
      width: 340px;
      text-align: center;
      font-size: 12px;
      position: relative;
      padding-right: 170px;
    }

    .switch-button:before {
      content: "Show Abilities Menu";
      font-family:'Scaly Sans';
      font-size:12px;
      position: absolute;
      top: 0;
      bottom: 0;
      right: 0;
      width: 170px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3;
      pointer-events: none;
    }

    .togcolorhide {
      color:white;
      transition: color 300ms;
    }

    .togcolorshow {
      color:#954531;
      transition: color 300ms;
    }

    .switch-button-checkbox {
      cursor: pointer;
      box-sizing: border-box;
      padding: 0;
      margin: 0;
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      z-index: 2;
    }

    .switch-button-checkbox:checked + .switch-button-label:before {
      transform: translateX(170px);
      transition: transform 300ms linear;
    }

    .switch-button-checkbox + .switch-button-label {
      position: relative;
      padding: 3px 0;
      font-family:'Scaly Sans';
      font-size:12px;
      box-sizing: border-box;
      display: block;
      user-select: none;
      pointer-events: none;
    }

    .switch-button-checkbox + .switch-button-label:before {
      content: "";
      background:#954531;
      position: absolute;
      height: 100%;
      box-sizing: border-box;
      width: 100%;
      left: 0;
      top: 0;
      border-radius: 20px;
      transform: translateX(0);
      transition: transform 300ms;
    }

    .switch-button-label-span {
      position: relative;
      box-sizing: border-box;
      font-family:'Scaly Sans';
      display: inline;
      margin: auto;
      font-size:12px;
      line-height:100%;
    }

    #container {
      width:90%;
      max-width:1200px;
      position:relative;
      margin:auto;
      background:lightgray;
      border:2px solid darkred;
    }

    #intro {
      position:relative;
      width:100%;
      max-width:1000px;
      padding:10px;
      margin:auto;
      font-family:'Scaly Sans';
      font-size:14px;
    }

    #statblock {
      width:80%;
      max-width:800px;
      position:relative;
      margin:10px auto;
      padding:5px;
      border-top:5px solid darkred;
      border-bottom:5px solid darkred;
      border-left:solid 1px #5d3309;
      border-right:solid 1px #5d3309;
      background: #eadcce;
    }

    #stats {
      position:relative;
      width:100%;
      max-width:1000px;
      padding:10px;
      margin:auto;
      font-size:14px;
      font-family:'Scaly Sans';
      line-height:150%;
    }

    #stats .spacer {
      width:90%;
      margin:auto;      
      height:10px;
      text-align:center;
      border-top:1px solid darkred;
      margin-top:10px;
    }

    #cr {
      font-size:14px;
      font-family:'Bookinsanity';
    }

    #abilities {
      position:relative;
      width:100%;
      max-width:1000px;
      padding:10px;
      margin:-15px auto auto auto;
      font-size:14px;
      font-family:'Scaly Sans';
      line-height:150%;
    }

    #abilities .spacer {
      width:100%;
      height:10px;
    }

    #presetfilters {
      width: 90%;
      box-sizing: border-box;
      padding: 0px;
      margin:auto;
      max-height: 0;
      overflow: hidden;
      transition: max-height 300ms ease;
      background:#ffffff8f;
    }

    #monfilters {
      max-height: 0;
      overflow: hidden;
      box-sizing: border-box;
      padding: 0px;
      transition: max-height 300ms ease;
      background:#c2c2c2;
    }

    #hdhide, #tptg {
      display:inline;
    }

    #hdshow, #lairbtn, #legbtn, #natrmr, #otharm, #othtp, #othlang {
      display:none;
    }

    #blnds, #hoverbox {
      margin-top:0px;
      max-height: 0;
      overflow: hidden;
      transition: max-height 300ms ease;
      font-size:12px;
    }


  </style>

  <script>

    function customHP() {
      var checkBox = document.getElementById("customhp");
      var tohide = document.getElementById("hdhide");
      var toshow = document.getElementById("hdshow");
      if (checkBox.checked == true){
        tohide.style.display = "none";
        toshow.style.display = "inline";
      } else {
        tohide.style.display = "inline";
        toshow.style.display = "none";
      }
    }

    function legendaryBtn() {
      var checkBox = document.getElementById("legendary");
      var toshow = document.getElementById("legbtn");
      if (checkBox.checked == true){
        toshow.style.display = "inline";
      } else {
        toshow.style.display = "none";
      }
    }

    function lairBtn() {
      var checkBox = document.getElementById("lair");
      var toshow = document.getElementById("lairbtn");
      if (checkBox.checked == true){
        toshow.style.display = "inline";
      } else {
        toshow.style.display = "none";
      }
    }

    function blindBeyond() {
      var bsrange = document.getElementById("bsight").value;
      var bbyond = document.getElementById("blnds");
      var bcheck = document.getElementById("blbeyond");
      if (bsrange > 0){
        bbyond.style.maxHeight = bbyond.scrollHeight + "px";
      } else {
        bbyond.style.maxHeight = 0;
        bcheck.checked = false;
      }
    }

    function naturalArmor() {
      var rmrtype = document.getElementById("mon-armor").value;
      var natbon = document.getElementById("natrmr");
      if (rmrtype == "type14"){
        natbon.style.display = "inline";
        otharm.style.display = "none";
      } else if (rmrtype == "other"){
        natbon.style.display = "none";
        otharm.style.display = "inline";
      }
      else {
        natbon.style.display = "none";
        otharm.style.display = "none";
      }
    }

    function tagOrType() {
      var montype = document.getElementById("mon-type").value;
      var tag = document.getElementById("tptg");
      var othtype = document.getElementById("othtp")
      if (montype == "other"){
        tag.style.display = "none";
        othtype.style.display = "inline";
      }
      else {
        tag.style.display = "inline";
        othtype.style.display = "none";
      }
    }

    function langOptions() {
      var langch = document.getElementById("languages").value;
      var otherlan = document.getElementById("othlang");
      if (langch == "other"){
        otherlan.style.display = "inline";
      } else {
        otherlan.style.display = "none";
      }
    }

    function flyHover() {
      var flspd = document.getElementById("flybox").value;
      var hvr = document.getElementById("hoverbox");
      var fcheck = document.getElementById("fly")
      if (flspd > 0){
        hvr.style.maxHeight = hvr.scrollHeight + "px";
      } else {
        hvr.style.maxHeight = 0;
        fcheck.checked = false;
      }
    }

    function menus() {
      var checkBox = document.getElementById("menus")
      var menuarea = document.getElementById("presetfilters")
      const showside = document.getElementsByClassName("togcolorshow")
      const hideside = document.getElementsByClassName("togcolorhide")
      if (checkBox.checked == true){
        menuarea.style.padding = "10px";
        menuarea.style.maxHeight = menuarea.scrollHeight + "px";
        menuarea.style.border = "1px solid darkred";
        for (let i = 0; i < showside.length; i++) {
          showside[i].style.color = "white";
        }
        for (let i = 0; i < hideside.length; i++) {
          hideside[i].style.color = "#954531";
        }
      } else {
        menuarea.style.padding = "0px";
        menuarea.style.maxHeight = 0;
        menuarea.style.border = "0px";
        for (let i = 0; i < hideside.length; i++) {
          hideside[i].style.color = "white";
        }
        for (let i = 0; i < showside.length; i++) {
          showside[i].style.color = "#954531";
        }
      }
    }

    function showmonfilters() {
      var checkBox = document.getElementById("filterbymon")
      var mf = document.getElementById("monfilters")
      var menuarea = document.getElementById("presetfilters")
      if (checkBox.checked == true){
        mf.style.padding = "10px";
        mf.style.maxHeight = mf.scrollHeight + "px";
        menuarea.style.maxHeight = mf.scrollHeight + menuarea.scrollHeight + "px";
      } else {
        mf.style.padding = "0px";
        mf.style.maxHeight = 0;
        menuarea.style.maxHeight = menuarea.scrollHeight + "px";
      }
    }

      /*Multi Select Js*/ 

      class MultiSelect {

        constructor(element, options = {}) {
            let defaults = {
                placeholder: 'Select item(s)',
                max: null,
                search: true,
                selectAll: true,
                listAll: true,
                name: '',
                width: '',
                height: '',
                dropdownWidth: '',
                dropdownHeight: '',
                data: [],
                onChange: function() {},
                onSelect: function() {},
                onUnselect: function() {}
            };
            this.options = Object.assign(defaults, options);
            this.selectElement = typeof element === 'string' ? document.querySelector(element) : element;
            for(const prop in this.selectElement.dataset) {
                if (this.options[prop] !== undefined) {
                    this.options[prop] = this.selectElement.dataset[prop];
                }
            }
            this.name = this.selectElement.getAttribute('name') ? this.selectElement.getAttribute('name') : 'multi-select-' + Math.floor(Math.random() * 1000000);
            if (!this.options.data.length) {
                let options = this.selectElement.querySelectorAll('option');
                for (let i = 0; i < options.length; i++) {
                    this.options.data.push({
                        value: options[i].value,
                        text: options[i].innerHTML,
                        selected: options[i].selected,
                        html: options[i].getAttribute('data-html')
                    });
                }
            }
            this.element = this._template();
            this.selectElement.replaceWith(this.element);
            this._updateSelected();
            this._eventHandlers();
        }

        _template() {
            let optionsHTML = '';
            for (let i = 0; i < this.data.length; i++) {
                optionsHTML += `
                    <div class="multi-select-option${this.selectedValues.includes(this.data[i].value) ? ' multi-select-selected' : ''}" data-value="${this.data[i].value}">
                        <span class="multi-select-option-radio"></span>
                        <span class="multi-select-option-text">${this.data[i].html ? this.data[i].html : this.data[i].text}</span>
                    </div>
                `;
            }
            let selectAllHTML = '';
            if (this.options.selectAll === true || this.options.selectAll === 'true') {
                selectAllHTML = `<div class="multi-select-all">
                    <span class="multi-select-option-radio"></span>
                    <span class="multi-select-option-text">Select all</span>
                </div>`;
            }
            let template = `
                <div class="multi-select ${this.name}"${this.selectElement.id ? ' id="' + this.selectElement.id + '"' : ''} style="${this.width ? 'width:' + this.width + ';' : ''}${this.height ? 'height:' + this.height + ';' : ''}">
                    ${this.selectedValues.map(value => `<input type="hidden" name="${this.name}[]" value="${value}">`).join('')}
                    <div class="multi-select-header" style="${this.width ? 'width:' + this.width + ';' : ''}${this.height ? 'height:' + this.height + ';' : ''}">
                        <span class="multi-select-header-max">${this.options.max ? this.selectedValues.length + '/' + this.options.max : ''}</span>
                        <span class="multi-select-header-placeholder">${this.placeholder}</span>
                    </div>
                    <div class="multi-select-options" style="${this.options.dropdownWidth ? 'width:' + this.options.dropdownWidth + ';' : ''}${this.options.dropdownHeight ? 'height:' + this.options.dropdownHeight + ';' : ''}">
                        ${this.options.search === true || this.options.search === 'true' ? '<input type="text" class="multi-select-search" placeholder="Search...">' : ''}
                        ${selectAllHTML}
                        ${optionsHTML}
                    </div>
                </div>
            `;
            let element = document.createElement('div');
            element.innerHTML = template;
            return element;
        }

        _eventHandlers() {
            let headerElement = this.element.querySelector('.multi-select-header');
            this.element.querySelectorAll('.multi-select-option').forEach(option => {
                option.onclick = () => {
                    let selected = true;
                    if (!option.classList.contains('multi-select-selected')) {
                        if (this.options.max && this.selectedValues.length >= this.options.max) {
                            return;
                        }
                        option.classList.add('multi-select-selected');
                        if (this.options.listAll === true || this.options.listAll === 'true') {
                            headerElement.insertAdjacentHTML('afterbegin', `<span class="multi-select-header-option" data-value="${option.dataset.value}">${option.querySelector('.multi-select-option-text').innerHTML}</span>`);
                        }
                        this.element.querySelector('.multi-select').insertAdjacentHTML('afterbegin', `<input type="hidden" name="${this.name}[]" value="${option.dataset.value}">`);
                        this.data.filter(data => data.value == option.dataset.value)[0].selected = true;
                    } else {
                        option.classList.remove('multi-select-selected');
                        this.element.querySelectorAll('.multi-select-header-option').forEach(headerOption => headerOption.dataset.value == option.dataset.value ? headerOption.remove() : '');
                        this.element.querySelector(`input[value="${option.dataset.value}"]`).remove();
                        this.data.filter(data => data.value == option.dataset.value)[0].selected = false;
                        selected = false;
                    }
                    if (this.options.listAll === false || this.options.listAll === 'false') {
                        if (this.element.querySelector('.multi-select-header-option')) {
                            this.element.querySelector('.multi-select-header-option').remove();
                        }
                        headerElement.insertAdjacentHTML('afterbegin', `<span class="multi-select-header-option">${this.selectedValues.length} selected</span>`);
                    }
                    if (!this.element.querySelector('.multi-select-header-option')) {
                        headerElement.insertAdjacentHTML('afterbegin', `<span class="multi-select-header-placeholder">${this.placeholder}</span>`);
                    } else if (this.element.querySelector('.multi-select-header-placeholder')) {
                        this.element.querySelector('.multi-select-header-placeholder').remove();
                    }
                    if (this.options.max) {
                        this.element.querySelector('.multi-select-header-max').innerHTML = this.selectedValues.length + '/' + this.options.max;
                    }
                    if (this.options.search === true || this.options.search === 'true') {
                        this.element.querySelector('.multi-select-search').value = '';
                    }
                    this.element.querySelectorAll('.multi-select-option').forEach(option => option.style.display = 'flex');
                    headerElement.classList.remove('multi-select-header-active');
                    this.options.onChange(option.dataset.value, option.querySelector('.multi-select-option-text').innerHTML, option);
                    if (selected) {
                        this.options.onSelect(option.dataset.value, option.querySelector('.multi-select-option-text').innerHTML, option);
                    } else {
                        this.options.onUnselect(option.dataset.value, option.querySelector('.multi-select-option-text').innerHTML, option);
                    }
                };
            });
            headerElement.onclick = () => headerElement.classList.toggle('multi-select-header-active');  
            if (this.options.search === true || this.options.search === 'true') {
                let search = this.element.querySelector('.multi-select-search');
                search.oninput = () => {
                    this.element.querySelectorAll('.multi-select-option').forEach(option => {
                        option.style.display = option.querySelector('.multi-select-option-text').innerHTML.toLowerCase().indexOf(search.value.toLowerCase()) > -1 ? 'flex' : 'none';
                    });
                };
            }
            if (this.options.selectAll === true || this.options.selectAll === 'true') {
                let selectAllButton = this.element.querySelector('.multi-select-all');
                selectAllButton.onclick = () => {
                    let allSelected = selectAllButton.classList.contains('multi-select-selected');
                    this.element.querySelectorAll('.multi-select-option').forEach(option => {
                        let dataItem = this.data.find(data => data.value == option.dataset.value);
                        if (dataItem && ((allSelected && dataItem.selected) || (!allSelected && !dataItem.selected))) {
                            option.click();
                        }
                    });
                    selectAllButton.classList.toggle('multi-select-selected');
                };
            }
            if (this.selectElement.id && document.querySelector('label[for="' + this.selectElement.id + '"]')) {
                document.querySelector('label[for="' + this.selectElement.id + '"]').onclick = () => {
                    headerElement.classList.toggle('multi-select-header-active');
                };
            }
            document.addEventListener('click', event => {
                if (!event.target.closest('.' + this.name) && !event.target.closest('label[for="' + this.selectElement.id + '"]')) {
                    headerElement.classList.remove('multi-select-header-active');
                }
            });
        }

        _updateSelected() {
            if (this.options.listAll === true || this.options.listAll === 'true') {
                this.element.querySelectorAll('.multi-select-option').forEach(option => {
                    if (option.classList.contains('multi-select-selected')) {
                        this.element.querySelector('.multi-select-header').insertAdjacentHTML('afterbegin', `<span class="multi-select-header-option" data-value="${option.dataset.value}">${option.querySelector('.multi-select-option-text').innerHTML}</span>`);
                    }
                });
            } else {
                if (this.selectedValues.length > 0) {
                    this.element.querySelector('.multi-select-header').insertAdjacentHTML('afterbegin', `<span class="multi-select-header-option">${this.selectedValues.length} selected</span>`);
                }
            }
            if (this.element.querySelector('.multi-select-header-option')) {
                this.element.querySelector('.multi-select-header-placeholder').remove();
            }
        }

        get selectedValues() {
            return this.data.filter(data => data.selected).map(data => data.value);
        }

        get selectedItems() {
            return this.data.filter(data => data.selected);
        }

        set data(value) {
            this.options.data = value;
        }

        get data() {
            return this.options.data;
        }

        set selectElement(value) {
            this.options.selectElement = value;
        }

        get selectElement() {
            return this.options.selectElement;
        }

        set element(value) {
            this.options.element = value;
        }

        get element() {
            return this.options.element;
        }

        set placeholder(value) {
            this.options.placeholder = value;
        }

        get placeholder() {
            return this.options.placeholder;
        }

        set name(value) {
            this.options.name = value;
        }

        get name() {
            return this.options.name;
        }

        set width(value) {
            this.options.width = value;
        }

        get width() {
            return this.options.width;
        }

        set height(value) {
            this.options.height = value;
        }

        get height() {
            return this.options.height;
        }

        }
        document.querySelectorAll('[data-multi-select]').forEach(select => new MultiSelect(select));

  </script>
    
  </head>
  <body>
    <main>
      <div id="container">
        <h1 style="margin-top:40px;">Stat Block Builder</h1>
        <div id="intro">
        <div style="text-align:center"><label for="presets">Load an existing monster: </label>&nbsp;
          <select name="presets" id="presets">
            <option value="default">Default</option>
            <option value="ghost">Ghost</option>
            <option value="skeleton">Skeleton</option>
            <option value="vampire">Vampire</option>
          </select>&nbsp;&nbsp;&nbsp;
          <input class="button" type="button" onclick="alert('Load Preset')" value="Load Preset"></div>
        <h2>Stat Block:</h2>
        </div>
        <div id="statblock">
          <h1>Name</h1>
          <p>Monster stats and abilities. Lorem ipsum dolor sit amet. Et cetera and so on and so forth. Monster stats and abilities. Lorem ipsum dolor sit amet. Et cetera and so on and so forth. Monster stats and abilities. Lorem ipsum dolor sit amet. Et cetera and so on and so forth. Monster stats and abilities. Lorem ipsum dolor sit amet. Et cetera and so on and so forth. Monster stats and abilities. Lorem ipsum dolor sit amet. Et cetera and so on and so forth.</p>
        </div>
        <div id="stats">
          <h2>Stats:</h2>
          <table>
            <tr>
              <td>Monster Name:<br>
                <input class="text-box-long" type="text" value="Default Monster Name"></td>
              <td><label for="mon-size">Size:</label><br>
                <select name="mon-size" id="mon-size">
                  <option value="blank"></option>
                  <option value="tiny">Tiny</option>
                  <option value="small">Small</option>
                  <option value="medium">Medium</option>
                  <option value="large">Large</option>
                  <option value="huge">Huge</option>
                  <option value="gargantuan">Gargantuan</option>
                </select></td>
              <td><label for="mon-type">Type:</label><br>
                <select name="mon-type" id="mon-type" onchange="tagOrType()">
                  <option value="blank"></option>
                  <option value="aberration">Aberration</option>
                  <option value="beast">Beast</option>
                  <option value="celestial">Celestial</option>
                  <option value="construct">Construct</option>
                  <option value="dragon">Dragon</option>
                  <option value="elemental">Elemental</option>
                  <option value="fey">Fey</option>
                  <option value="fiend">Fiend</option>
                  <option value="giant">Giant</option>
                  <option value="humanoid">Humanoid</option>
                  <option value="monstrosity">Monstrosity</option>
                  <option value="ooze">Ooze</option>
                  <option value="plant">Plant</option>
                  <option value="undead">Undead</option>
                  <option value="other">Other</option>
                </select></td>
                <td><p id="tptg">Tag:<br>
                <input class="text-box-long" type="text" placeholder="tag"></p>
                <p id="othtp">Type:<br>
                <input class="text-box-long" type="text" placeholder="type"></p></td>
              <td>Alignment:<br>
                <input class="text-box-long" type="text" placeholder="unaligned"></td>
              </tr>
          </table>
          <div class="spacer"></div>
          <table style="text-align:center">
            <tr>
              <td>Strength</td>
              <td>Dexterity</td>
              <td>Constitution</td>
              <td>Intelligence</td>
              <td>Wisdom</td>
              <td>Charisma</td>
            </tr>
            <tr>
              <td><input class="num-box" type="number" min="0" value="10"></td>
              <td><input class="num-box" type="number" min="0" value="10"></td>
              <td><input class="num-box" type="number" min="0" value="10"></td>
              <td><input class="num-box" type="number" min="0" value="10"></td>
              <td><input class="num-box" type="number" min="0" value="10"></td>
              <td><input class="num-box" type="number" min="0" value="10"></td>
            </tr>
            <tr>
              <td>Mod</td>
              <td>Mod</td>
              <td>Mod</td>
              <td>Mod</td>
              <td>Mod</td>
              <td>Mod</td>
          </table>
          <div class="spacer"></div>
          <table>
            <tr>
              <td><label for="saves">Saving Throws:</label><br>
                <select name="saves" id="saves" data-placeholder="Select saving throw proficiencies" multiple data-multi-select>
                  <option value="strength">Strength</option>
                  <option value="dexterity">Dexterity</option>
                  <option value="constitution">Constitution</option>
                  <option value="intelligence">Intelligence</option>
                  <option value="wisdom">Wisdom</option>
                  <option value="charisma">Charisma</option>
                </select> <!--<br>
                <input class="button" type="button" onclick="alert('Proficient')" value="Proficient">-->
              </td>
              <td><p id="hdhide">Hit Dice: <input class="num-box" type="number" min="0" value="2"></p><p id="hdshow">Hit Points: <input class="text-box-long" type="text" placeholder="Enter custom HP"></p><br>
                <label for="customhp">Use custom HP?</label> <input type="checkbox" id="customhp" name="customhp" value="customhp" onclick="customHP()"></td>
              <td><label for="mon-armor">Armor:</label> <select name="mon-armor" id="mon-armor" onchange="naturalArmor()">
                  <option value="blank"></option>
                  <option value="type1">Padded Armor</option>
                  <option value="type2">Leather Armor</option>
                  <option value="type3">Studded Leather</option>
                  <option value="type4">Hide Armor</option>
                  <option value="type5">Chain Shirt</option>
                  <option value="type6">Scale Mail</option>
                  <option value="type7">Spiked Armor</option>
                  <option value="type8">Breastplate</option>
                  <option value="type9">Half Plate</option>
                  <option value="type10">Ring Mail</option>
                  <option value="type11">Chain Mail</option>
                  <option value="type12">Splint Armor</option>
                  <option value="type13">Plate Mail</option>
                  <option value="type14">Natural Armor</option>
                  <option value="other">Other</option>"
                </select>&nbsp;&nbsp;&nbsp;
                <label for="shield">Shield?</label> <input type="checkbox" id="shield" name="shield" value="shield"><br>
                <p id="natrmr">Natural Armor Bonus: <input class="num-box" type="number" min="0" placeholder="2"><br></p>
                <p id="otharm">AC and Armor Description:
                <input class="text-box-long" type="text" placeholder="10 (description)"></p></td>
            </tr>
        </table>
          <div class="spacer"></div>        
        <table>
          <tr>
            <td><label for="damages">Damage Types:</label><br>
              <select name="damages" id="damages">
                <option value="acid">Acid</option>
                <option value="bludgeoning">Bludgeoning</option>
                <option value="cold">Cold</option>
                <option value="fire">Fire</option>
                <option value="force">Force</option>
                <option value="lightning">Lightning</option>
                <option value="necrotic">Necrotic</option>
                <option value="piercing">Piercing</option>
                <option value="poison">Poison</option>
                <option value="psychic">Psychic</option>
                <option value="radiant">Radiant</option>
                <option value="slashing">Slashing</option>
                <option value="thunder">Thunder</option>
                <option value="nonmagic">Nonmagical weapons</option>
                <option value="nonsilver">Non-silvered weapons</option>
              </select><br>
              <input class="button" type="button" onclick="alert('Resistant')" value="Resistant">
              <input class="button" type="button" onclick="alert('Immune')" value="Immune">
              <input class="button" type="button" onclick="alert('Vulnerable')" value="Vulnerable">
            </td>
            <td><label for="conditions">Conditions:</label><br>
              <select name="conditions" id="conditions">
                <option value="blinded">Blinded</option>
                <option value="charmed">Charmed</option>
                <option value="deafened">Deafened</option>
                <option value="exhaustion">Exhaustion</option>
                <option value="frightened">Frightened</option>
                <option value="grappled">Grappled</option>
                <option value="incapacitated">Incapacitated</option>
                <option value="invisible">Invisible</option>
                <option value="paralyzed">Paralyzed</option>
                <option value="petrified">Petrified</option>
                <option value="poisoned">Poisoned</option>
                <option value="prone">Prone</option>
                <option value="restrained">Restrained</option>
                <option value="stunned">Stunned</option>
                <option value="unconscious">Unconscious</option>
                <option value="other">Other</option>
              </select><br>
              <input class="button" type="button" onclick="alert('Immune')" value="Immune">
            </td>
            <td><label for="skills">Skills:</label><br>
              <select name="skills" id="skills">
                <option value="acrobatics">Acrobatics</option>
                <option value="animal handling">Animal Handling</option>
                <option value="arcana">Arcana</option>
                <option value="athletics">Athletics</option>
                <option value="deception">Deception</option>
                <option value="history">History</option>
                <option value="insight">Insight</option>
                <option value="intimidation">Intimidation</option>
                <option value="investigation">Investigation</option>
                <option value="medicine">Medicine</option>
                <option value="nature">Nature</option>
                <option value="perception">Perception</option>
                <option value="performance">Performance</option>
                <option value="persuasion">Persuasion</option>
                <option value="religion">Religion</option>
                <option value="sleight of hand">Sleight of Hand</option>
                <option value="stealth">Stealth</option>
                <option value="survival">Survival</option>
              </select><br>
              <input class="button" type="button" onclick="alert('Proficient')" value="Proficient">
              <input class="button" type="button" onclick="alert('Expertise')" value="Expertise">
            </td>
            <td><label for="languages">Languages:</label><br>
              <select name="languages" id="languages" onchange="langOptions()">
                <option value="common">Common</option>
                <option value="abyssal">Abyssal</option>
                <option value="celestial">Celestial</option>
                <option value="deep speech">Deep Speech</option>
                <option value="draconic">Draconic</option>
                <option value="dwarven">Dwarven</option>
                <option value="elvish">Elvish</option>
                <option value="giant">Giant</option>
                <option value="gnomish">Gnomish</option>
                <option value="goblin">Goblin</option>
                <option value="halfling">Halfling</option>
                <option value="infernal">Infernal</option>
                <option value="orcish">Orcish</option>
                <option value="primordial">Primordial</option>
                <option value="sylvan">Sylvan</option>
                <option value="undercommon">Undercommon</option>
                <option value="void speech">Void Speech</option>
                <option value="other">Other</option>
              </select><br>
              <p id="othlang"><input class="text-box-long" type="text" placeholder="Other"><br></p>
              <input class="button" type="button" onclick="alert('Speaks')" value="Speaks">
              <input class="button" type="button" onclick="alert('Understands')" value="Understands">
            </td>
          </tr>
        </table>
          <div class="spacer"></div>
        <table>
          <tr>
            <td>Darkvision: <input class="num-box" type="number" min="0" placeholder="0"> ft.</td>
            <td>Blindsight: <input class="num-box" type="number" min="0" placeholder="0" id="bsight" onchange="blindBeyond()"> ft.<br>
              <p id="blnds"><label for="blbeyond">Blind beyond?</label> <input type="checkbox" id="blbeyond" name="blbeyond" value="blindsight"></p></td>
            <td>Tremorsense: <input class="num-box" type="number" min="0" placeholder="0"> ft.</td>
            <td>Truesight: <input class="num-box" type="number" min="0" placeholder="0"> ft.</td>
            <td>Telepathy: <input class="num-box" type="number" min="0" placeholder="0"> ft.</td>
          </tr>
        </table>
          <div class="spacer"></div>
        <table>
          <tr>
            <td>Speed: <input class="num-box" type="number" min="0" value="30"> ft.</td>
            <td>Fly: <input class="num-box" type="number" min="0" placeholder="0" id="flybox" onchange="flyHover()"> ft.<br>
              <p id="hoverbox"><label for="fly">Hover?</label> <input type="checkbox" id="fly" name="fly" value="hover"></p></td>
            <td>Swim: <input class="num-box" type="number" min="0" placeholder="0"> ft.</td>
            <td>Burrow: <input class="num-box" type="number" min="0" placeholder="0"> ft.</td>
            <td>Climb: <input class="num-box" type="number" min="0" placeholder="0"> ft.</td>
          </tr>
        </table>
        <div class="spacer"></div>
        <div style="text-align:center">
          <label for="cr">Challenge Rating:</label> <select name="cr" id="cr">
            <option value="0">0</option>
            <option value="0.125">1/8</option>
            <option value="0.25">1/4</option>
            <option value="0.5">1/2</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
            <option value="25">25</option>
            <option value="26">26</option>
            <option value="27">27</option>
            <option value="28">28</option>
            <option value="29">29</option>
            <option value="30">30</option>
          </select>
          <p style="font-family:'Bookinsanity';font-size:14px;">Proficiency bonus: ##</p>
          <div class="spacer"></div>
          <label for="legendary">Legendary?</label> <input type="checkbox" id="legendary" name="legendary" value="legendary" onclick="legendaryBtn()"></td>&nbsp;&nbsp;&nbsp;
          <label for="lair">Lair Actions?</label> <input type="checkbox" id="lair" name="lair" value="lair" onclick="lairBtn()"></td>
          
        </div>
      </div> 
      <div id="abilities">
        <h2>Abilities:</h2>
        <div style="text-align:center; font-size:15px;"><input class="text-box-long" type="text" value="Ability Name">
          </div>
        <div class="spacer"></div>
        <div style="text-align:center">
          <textarea name="description">Description goes here.</textarea>
          <div class="spacer"></div>
          <input class="button" type="button" onclick="alert('Add Ability')" value="Add Ability">
          <input class="button" type="button" onclick="alert('Add Action')" value="Add Action">
          <input class="button" type="button" onclick="alert('Add Bonus Action')" value="Add Bonus Action">
          <input class="button" type="button" onclick="alert('Add Reaction')" value="Add Reaction">
          <input class="button" type="button" id="legbtn" onclick="alert('Add Legendary Action')" value="Add Legendary Action">
          <input class="button" type="button" id="lairbtn" onclick="alert('Add Lair Action')" value="Add Lair Action">
            <div class="spacer"></div>
            <div class="switch-button togcolorshow" style="text-align:center; margin:auto; font-family:'Scaly Sans'">
              <input class="switch-button-checkbox" type="checkbox" id="menus" value="Hide" onclick="menus()"></input>
              <label class="switch-button-label" for=""><span class="switch-button-label-span togcolorhide">Hide Abilities Menu</span></label>
            </div>
          <div class="spacer"></div>
        </div>
        <div id="presetfilters">
          <label for="filterbymon">Show monster-specific filters?</label> <input type="checkbox" value="filterbymon" id="filterbymon" onclick="showmonfilters()"></input>
          <div id="monfilters">
            <label for="monnameselect">Search monster names:</label> <select id="monnameselect" name="monnameselect" size="1" multiple>
              <option value="mon1">Monster 1</option>
              <option value="mon2">Monster 2</option>
              <option value="mon3">Monster 3</option>
              <option value="mon4">Monster 4</option>
              <option value="mon5">Monster 5</option>
              <option value="mon6">Monster 6</option>
            </select>&nbsp;&nbsp;&nbsp;
            <label for="montypefilter">Select monster types:</label> <select name="montypefilter" id="montypefilter" multiple size="1">
              <option value="aberration">Aberration</option>
              <option value="beast">Beast</option>
              <option value="celestial">Celestial</option>
              <option value="construct">Construct</option>
              <option value="dragon">Dragon</option>
              <option value="elemental">Elemental</option>
              <option value="fey">Fey</option>
              <option value="fiend">Fiend</option>
              <option value="giant">Giant</option>
              <option value="humanoid">Humanoid</option>
              <option value="monstrosity">Monstrosity</option>
              <option value="ooze">Ooze</option>
              <option value="plant">Plant</option>
              <option value="undead">Undead</option>
            </select>&nbsp;&nbsp;&nbsp;
            <label for="monsubtypefilter">Select monster subtype:</label> <select name="monsubtypefilter" id="monsubtypefilter" multiple size="1">
              <option value="race1">Race 1</option>
              <option value="race2">Race 2</option>
              <option value="race3">Race 3</option>
              <option value="race4">Race 4</option>
              <option value="devil">Devil</option>
              <option value="demon">Demon</option>
            </select>
          </div>
          <div style="margin:auto; text-align:center;">
            <select name="preset-ability" id="preset-ability">
              <option value="Select Preset">Select Preset</option>"
              <option value="Preset 1">Preset 1</option>
              <option value="Preset 2">Preset 2</option>
              <option value="Preset 3">Preset 3</option>
              </select>
            <input class="button" type="button" onclick="alert('Load Preset')" value="Load Preset">
            </div>
            <div class="spacer"></div>
          </div>
        </div>
      <div class="end-spacer"></div>
      </div>
    </main>
  </body>
</html>
